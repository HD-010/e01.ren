<style type="text/css">
/* 用户偏好设置样式 */
.wgetTitle{
    height: 36px;
    border: 0;
    border-top: 12px solid #FFFFFF;
    margin-top: 6px;
    padding-left: 12px;
    background-color: aliceblue;
    line-height: 36px;
}
.showLines{
	height:24px;
    border: 0;
    padding-left:13px;
    line-height:24px;
	font-size:13px;
}
.autoFresh{
	border: 0;
    padding-left:13px;
	font-size:13px;
}
.autoFresh dt{
	height:24px;
    border: 0;
	line-height:24px;
}
.autoFresh dd{
	height:16px;
    border: 0;
	padding-left:13px;
	line-height:16px;
}
</style>


<div name="wgetTitle" class="wgetTitle">用户偏好设置</div>
<div class="showLines">每页显示日志 <input name="showLines" onchange=common.setCookieOption(this) type="number" min="1" max="99" value="5" />条</div>
<dl class="autoFresh">
	<dt>开启自动刷新 <input name="showOnChang" onchange=common.setCookieOption(this) type="checkbox"  /></dt>
	<dd>自格式化最后条记录<input name="autoFormate" onchange=common.setCookieOption(this) disabled=disabled type="checkbox"  /></dd>
</dl>
<script>
//定义元素和当前元素的关系:格式[[元素1名称，元素2名称，...],当前元名称,动作名称1｜动作名称2｜动作名称3...]
common.append.push([["autoFormate"],"showOnChang","disabled|enlabled"]);

$(document).ready(function(){
	//设置type=text项初始值
	var lines = common.getCookies("showLines") || 5;
	$("input[name=showLines]").val(lines);
	
	//设置type=checkbox项初始值
	var checkBox = $("input[type=checkbox]");
	for(var o in checkBox){
		var attName = checkBox[o].name;
		var checkStats = common.getCookies(attName);
		checkStats = (checkStats == 'true') ? true : false;
		checkBox[o].checked=checkStats;
		
		//根据父元素的状态设置以下元素的初始状态
		var initVal = $("input[name=showOnChang]").is(":checked")
		console.log(initVal);
		if(initVal){
			$("input[name=autoFormate]").removeAttr("disabled");
		}
	}
});
</script>

